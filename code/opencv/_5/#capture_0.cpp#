#include<opencv2/opencv.hpp>
#include<string>
#include<iostream>
#include<stdlib.h>
#include<stdio.h>
using namespace std;
using namespace cv;

int main()
{
	VideoCapture capture(0);
	double fps=0;
	double t=0;
	char str[10];
	Mat frame;

	while(1)
	{
		t=(double)getTickCount();
		if(!capture.isOpened())
		{
			cout<<"你tm没开摄像头"<<endl;
			break;
		}
		else
		{
			capture>>frame;
			t=((double)getTickCount()-t)/getTickFrequency();
			fps=1.0/t;
			sprintf(str,"%.2f",fps);
			string FPS="fps:";
			FPS+=str;
			//printf("fps:%.2f width:%d height:%d fps:%.2f",fps,frame.cols,frame.rows,capture.get(CAP_PROP_FPS));
			putText(frame,FPS,Point(450,460),FONT_HERSHEY_SIMPLEX,1,Scalar(0,255,0));
			imshow("camera",frame);
			char c=waitKey(50);
			if(c==27)break;
		}
	}
}

